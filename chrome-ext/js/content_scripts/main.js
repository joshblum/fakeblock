//attaches event listeners and handles passing messages